<html>
<head>
<title>Agreement A in R</title>
<link rel="stylesheet" href="basic.css" type="text/css" /></head>
<body>
<h1>Agreement A in R</h1>

<p>The <i>R</i> package <tt>agrmt</tt> calculates agreement in ordered rating scales. It implements Cees van der Eijk's (2001) measure of agreement A, which can be used to describe agreement, consensus, or polarization among respondents.</p>

<p>There is an implementation for <i>Stata</i> available from Alejandro Ecker: <a href="http://ideas.repec.org/c/boc/bocode/s457287.html">ideas.repec.org/c/boc/bocode/s457287.html</a>.</p>

<h2>Functions in the Package</h2>
<p><ul><li><a href="#a">agreement</a></li>
<li><a href="#p">polarization</a></li>
<li><a href="#j">AJUS classification</a></li>
<li><a href="#i">ISD classification</a></li>
<li><a href="#m">(multiple) modes</a></li>
</ul></p>

<h2>Installation and Use</h2>
<h3>Installation</h3>
<p>To install the R package <tt>agrmt</tt>, use the following command within <i>R</i>:</p>
<p><tt>install.packages("agrmt", repos="http://R-Forge.R-project.org")</tt></p>

<a name="a"><h3>Agreement A</h3>
<p>Ordered rating scales are a common format in surveys, and often we are interested in the extent to which responses are in agreement (whether there is consensus, whether there is concentration among the responses). Standard deviations are in this case an inappropriate measure. Van der Eijk's measure of agreement A disaggregates frequency distributions into component parts called layers. At the level of these layers, agreement can easily be determined, and the measure of agreement provides the weighted average.</p>

<p>We can use the example provided by van der Eijk (p.331) to illustrate the use of layers.</p>

<p><table border="0" cellpadding="2"><tr><td>Position on rating scale</td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">4</td><td align="center">5</td><td align="center">6</td><td align="center">7</td></tr>
<tr><td>Observed frequencies</td><td>30</td><td>40</td><td>210</td><td>130</td><td>530</td><td>50</td><td>10</td></tr>
</table></p>

<p>The measure of agreement divides this into layers, starting with the lowest observed frequencies. The level of agreement for this layer is calculated, and weighted by the number of observations in this layer. This is repeated for all layers, using any additional observations, until we reach the highest observed frequencies. For the first layer, there are 10 observations for each position. This gives a level of agreement of 0 for this level. The weight of the level is the number of observations in this layer (70) divided by the total number of observations (1000). For the second layer, we have already used all 10 observations for position 7, so a 0 will be added. the second lowest frequency is the 20 left for position 1. The level of agreement for the second layer is 0.17, with a weight of 0.12.</p>

<p><table border="0" cellpadding="2"><tr><td></td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">4</td><td align="center">5</td><td align="center">6</td><td align="center">7</td><td>Agreement of layer</td><td>Pattern</td><td>Weight</td></tr>
<tr><td>Layer 1</td><td>10</td><td>10</td><td>10</td><td>10</td><td>10</td><td>10</td><td>10</td><td align="center">0</td><td>1111111</td><td>0.07</td></tr>
<tr><td>Layer 2</td><td>20</td><td>20</td><td>20</td><td>20</td><td>20</td><td>20</td><td>0</td><td align="center">0.167</td><td>1111110</td><td>0.12</td></tr>
<tr><td>Layer 3</td><td>0</td><td>10</td><td>10</td><td>10</td><td>10</td><td>10</td><td>0</td><td align="center">0.333</td><td>0111110</td><td>0.05</td></tr>
<tr><td>Layer 4</td><td>0</td><td>0</td><td>10</td><td>10</td><td>80</td><td>10</td><td>0</td><td align="center">0.5</td><td>0011110</td><td>0.04</td></tr>
<tr><td>Layer 5</td><td>0</td><td>0</td><td>80</td><td>80</td><td>80</td><td>0</td><td>0</td><td align="center">0.667</td><td>0011100</td><td>0.24</td></tr>
<tr><td>Layer 6</td><td>0</td><td>0</td><td>80</td><td>0</td><td>80</td><td>0</td><td>0</td><td align="center">0.467</td><td>0010100</td><td>0.16</td></tr>
<tr><td>Layer 7</td><td>0</td><td>0</td><td>0</td><td>0</td><td>320</td><td>0</td><td>0</td><td align="center">1</td><td>0000100</td><td>0.32</td></tr>
<tr><td>Total</td><td>30</td><td>40</td><td>210</td><td>130</td><td>530</td><td>50</td><td>10</td><td></td><td></td><td></td></tr>
</table></p>

<p>Using the weighted average, we get a level of agreement of 0.61. The outlined procedure can be applied to any ordered frequency distribution.</p>

<p>Levels of agreement range from -1 to 1. There are three ideal-typical positions that help interpretation. If all respondents agree on the category (position), agreement is 1. If the respondents are evenly spread, and each category has the same number of responses, agreement is 0. If respondents are divided, and half the responses are in one category, and the other half are in a different, non-neighbouring category, agreement is -1. In the figure, I also included an example between these ideal types. Agreement is only defined if there are at least three response categories, and it does not tell you which of the categories is the most common one.</p>

<p><img src="agreement-plot.png"></p>

<h3>Using Agreement</h3>
<p>Van der Eijk gives the example of respondents placing political parties on a 7-point rating scale.</p>

<p><table border="0" cellpadding="2"><tr><td>Position</td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">4</td><td align="center">5</td><td align="center">6</td><td align="center">7</td></tr>
<tr><td>PvdA</td><td>2.4%</td><td>2.8%</td><td>3.2%</td><td>6.2%</td><td>13.5%</td><td>30.4%</td><td>41.6%</td></tr>
<tr><td>D66</td><td>1.6%</td><td>2.6%</td><td>8.2%</td><td>21%</td><td>29.3%</td><td>27%</td><td>10.3%</td></tr>
</table></p>

<p>To calculate the level of agreement for these two frequency distribution, we simply type <tt>agreement(c(2.4,2.8,3.2,6.2,13.5,30.4,41.6))</tt> for the PvdA, and <tt>agreement(c(1.6,2.6,8.2,21,29.3,27,10.3))</tt> for the D66. This gives us levels of agreement of 0.61 for the PvdA, and 0.48 for the D66.</p>

<p>We can also calculate the level of agreement for the frequency distribution used in the above section: <tt>agreement(c(30,40,210,130,530,50,10))</tt>, which gives a value of 0.61.</p>

<p>If we have not already calculated the frequency distributions (i.e. how many responses in which category), we could use the <tt>table</tt> command in R to get the frequencies. To avoid additional steps, the function <tt>collapse</tt> is provided. If we have the responses [1,2,4,2,5,2,3,1,2,1,3,2,4,1,5,2,3,2,4,2,3,1,1,3], the function gives you the frequencies. Use <tt>collapse(c(1,2,4,2,5,2,3,1,2,1,3,2,4,1,5,2,3,2,4,2,3,1,1,3))</tt> to get the frequencies [6 8 5 3 2], indicating that there are 6 responses in category 1, 8 in category 2, etc. We can then use this with the <tt>agreement</tt> function: <tt>agreement(collapse(c(1,2,4,2,5,2,3,1,2,1,3,2,4,1,5,2,3,2,4,2,3,1,1,3)))</tt> to give a value of 0.31. Typically, we use the variable name here (e.g. POSITION): <tt>collapse(POSITION)</tt>.</p>

<p>An important advantage of using the <tt>collapse</tt> function over the built-in <tt>table</tt> function is that it can deal with categories with 0 responses. In this case, you need to specify the position at which categories exist, using the <tt>pos=</tt> argument. If we have the responses [1,2,4,2,5,2,7,7,3,1,2,1,3,2,4,1,5,2,3,2,4,2,3,1,1,3], both the <tt>table</tt> and the <tt>collapse</tt> function give us the following frequencies [6 8 5 3 2 2]. There are no responses with position 6. We can tell the <tt>collapse</tt> function that there are 7 response categories by specifying the positions at which categories exist: <tt>collapse(c(1,2,4,2,5,2,7,7,3,1,2,1,3,2,4,1,5,2,3,2,4,2,3,1,1,3), pos=1:7)</tt>. I can also use <tt>c(1,2,3,4,5,6,7)</tt> instead of the <tt>1:7</tt>. This time I get [6 8 5 3 2 0 2] including the 0 for position 6. To get the level of agreement, this is <tt>agreement(collapse(c(1,2,4,2,5,2,7,7,3,1,2,1,3,2,4,1,5,2,3,2,4,2,3,1,1,3), pos=1:7))</tt>, 0.39.</p>

<p><b>Typically, we use the variable name (e.g. POSITION): <tt>agreement(collapse(POSITION))</tt>.</b></p>

<a name="p"><h3>Using Polarization</h3>
<p>The <tt>polarization</tt> function simply rescales agreement values to provide a more intuitive interpretation if one is interested in polarization rather than agreement. More precisely, it gives you (1-agreement)/2. This means that a polarization value of 1 means perfect polarization (bottom-left corner of the graph above), and a value of 0 means perfect agreement. A value of 0.5 corresponds to the &quot;no agreement&quot; in the above graph.</p>

<p>Usage is equivalent to <tt>agreement</tt>: <tt>polarization(collapse(c(1,2,4,2,5,2,7,7,3,1,2,1,3,2,4,1,5,2,3,2,4,2,3,1,1,3), pos=1:7))</tt> gives you 0.30. Or we can calculate polarization for the Dutch parties: <tt>polarization(c(2.4,2.8,3.2,6.2,13.5,30.4,41.6))</tt> for the PvdA, and <tt>polarization(c(1.6,2.6,8.2,21,29.3,27,10.3))</tt> for the D66, giving 0.20 and 0.26 respectively.</p>

<p><b>Typically, we use the variable name (e.g. POSITION): <tt>polarization(collapse(POSITION))</tt>.</b></p>

<a name="j"><h3>Using AJUS</h3>
<p>Galtung introduced a system to classify distributions according to shape. This is a means to reduce complexity.</p>

<p><b><tt>AJUS(distribution)</tt></b> gives you the shape or type, as well as whether there is a skew. I have added a new type &quot;F&quot; to complement the ones identified by Galtung. The skew is given as -1 for a negative skew, 0 for absence of skew, or +1 for a positive skew.</p>

<p><ul><li>A: unimodal distribution, peak in the middle</li>
<li>J: unimodal, peak at either end</li>
<li>U: bimodal, peak at both ends</Li>
<li>S: bimodal or multi-modal, multiple peaks</li>
<li>F: flat, no peak; this type is new</li></ul></p>

<p>Galtung developed the AJUS system for a somewhat systematic classification of distributions, but not for the use on computers. The advantage of using a function on the computer is twofold. On the one hand, we can easily apply the AJUS system to many distributions, <tt>sapply</tt> may be your friend there. On the other hand, the tolerance used in th AJUS system is applied in a systematic manner. When using human judgement on whether two values are roughly the same or different, a really systematic approach cannot guaranteed. In the <tt>AJUS</tt> function, you can specify the argument <tt>tolerance</tt> to change the tolerance. I use the <tt>all.equal</tt> function (base package) to determine whether two values are roughly the same.</p>

<a name="i"><h3>Using ISD</h3>
<p>The ISD system by Galtung is another way to reduce complexity, this time for changes over time. The ISD takes a vector with three time points. These three points describe two periods during which changes may occur</p>

<p><b><tt>ISD(distribution)</tt></b> gives you a type and a description of the type.</p>
<ul><li>Type 1: increase in both periods</li>
<li>Type 2: increase in first period, flat in second period</li>
<li>Type 3: increase in first period, decrease in second period</li>
<li>Type 4: flat in first period, increase in second period</li>
<li>Type 5: flat in both periods</li>
<li>Type 6: flat in first period, decrease in second period</li>
<li>Type 7: decrease in first period, increase in second period</li>
<li>Type 8: decrease in first period, flat in second period</li>
<li>Type 9: decrease in both periods</li></ul>

<a name="m"><h3>Using (Multiple) Modes</h3>
<p>The function <tt>modes</tt> tell you at which position the mode is. This can be used, for instance, in conjunction with the <tt>agreement</tt> function to identify at which point agreement is reached (not only that). The functions accept frequency distributions where multiple positions are the most common ones, which can happen in ordered rating scales. The function <tt>second.modes</tt> additionally gives you the value and position(s) of the second most common value. In addition to the mode and the positions, the functions also indicate whether these values are contiguous (i.e. in neighbouring response categories).</p>

<h3>Going Further</h3>
<p>For further documentation, please refer to the original contributions by van der Eijk (2001) and Galtung (1967), and refer to the package help files.</p>
<p>Van der Eijk, C. 2001. &quot;Measuring agreement in ordered rating scales.&quot; <i>Quality and Quantity</i> 35(3): 325-341.</p>
<p>Galtung, J. 1969. <i>Theory and Methods of Social Research.</i> Oslo: Universitetsforlaget.</p>

<h2>Development</h2>
<p>You can find the project summary page on R-Forge: <a href="https://r-forge.r-project.org/projects/agrmt/">r-forge.r-project.org/projects/agrmt/</a>.</p>

<h2>Licence</h2>
<p>The R package <tt>agrmt</tt> is open source distributed under the GNU General Public License (GPL).</p>

<p id="footer"><small>Last update 18 July 2012 | Didier Ruedin</small></p>
</body></html>
